# Configures a single sensor for use as an external temperature source.
# Can be included multiple times, as needed.
sensor:
  - platform: homeassistant
    id: "${source.internal_id}"
    name: "${source.name}"
    entity_id: "${source.entity_id}"
    unit_of_measurement: "Â°C"
    device_class: "temperature"
    state_class: "measurement"
    internal: true
    disabled_by_default: true
    filters:
      # The heat pump needs a value, in Celsius.
      - lambda: return ((x - 32.0) * (5.0 / 9.0));
      # If it doesn't get one every ~6 minutes, it'll switch back to the internal sensor.
      - timeout: ${source.timeout | default('30min')} # If no value is received from HA for a while, go to NaN.
      - heartbeat: # Re-send the last value at least every 5 minutes.
          period: 5min
          optimistic: true

# See ./README.md for sensor configuration.